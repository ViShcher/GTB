üèãÔ∏è‚Äç‚ôÇÔ∏è Fitness Bot TG

–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫: —É—á—ë—Ç –ø–æ–¥—Ö–æ–¥–æ–≤, –≤–µ—Å–∞ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞.
–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ aiogram 3, FastAPI, PostgreSQL (Async) –∏ –¥–µ–ø–ª–æ–∏—Ç—Å—è –Ω–∞ Railway.

‚öôÔ∏è –°—Ç–µ–∫

Python 3.12+

aiogram 3 (–≤–µ–±—Ö—É–∫ —Ä–µ–∂–∏–º)

FastAPI ‚Äî —Å–µ—Ä–≤–µ—Ä –¥–ª—è /webhook –∏ /health

SQLModel / asyncpg / PostgreSQL

Railway CI/CD

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
bot.py                ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ polling
server.py             ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä –ø–æ–¥ –≤–µ–±—Ö—É–∫
config.py             ‚Äî ENV + –∞–≤—Ç–æ–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è URL –≤ asyncpg
db.py                 ‚Äî ORM-–º–æ–¥–µ–ª—å –∏ —Å–µ—Å—Å–∏–∏
seed_data.py          ‚Äî –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ë–î —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
routers/
  ‚îú‚îÄ‚îÄ basic.py        ‚Äî /help, —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
  ‚îú‚îÄ‚îÄ profile.py      ‚Äî –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –∏ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  ‚îú‚îÄ‚îÄ training.py     ‚Äî –ª–æ–≥–∏–∫–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∏ –ø–æ–¥—Ö–æ–¥–æ–≤
  ‚îî‚îÄ‚îÄ __init__.py
requirements.txt
README.md

üöÄ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Railway

–ü–æ–¥–∫–ª—é—á–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

–í Variables –¥–æ–±–∞–≤—å:

BOT_TOKEN=<—Ç–≤–æ–π_—Ç–æ–∫–µ–Ω>
RAILWAY_PUBLIC_DOMAIN=<–¥–æ–º–µ–Ω_railway>
WEBHOOK_PATH=webhook/ShlaSaSha
DATABASE_URL=postgresql+asyncpg://user:pass@postgres.railway.internal:5432/railway


–í requirements.txt –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç asyncpg ‚Äî –Ω–µ —É–±–∏—Ä–∞–π.

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–Ω–∏–º–µ—Ç Postgres-–ø–ª–∞–≥–∏–Ω.

–ü–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞ –±–æ—Ç –ª–æ–≥–∏—Ä—É–µ—Ç Created groups –∏ Seeded exercises ‚Äî –∑–Ω–∞—á–∏—Ç –ë–î –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞.

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∂–∏–≤–æ—Å—Ç—å:

GET https://<–¥–æ–º–µ–Ω>/health  ‚Üí {"status":"ok"}

üß† –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–æ–Ω–±–æ—Ä–¥–∏–Ω–≥ —Å –≤—ã–±–æ—Ä–æ–º —Ü–µ–ª–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ç–µ–ª–∞;

—Ç—Ä–µ–∫–µ—Ä –ø–æ–¥—Ö–æ–¥–æ–≤ –∏ –≤–µ—Å–∞ –∫–Ω–æ–ø–∫–∞–º–∏ (+1 / +2 / +5 –ø–æ–≤—Ç–æ—Ä—ã, +2.5 –∫–≥ / +5 –∫–≥ / +10 –∫–≥);

–∏—Å—Ç–æ—Ä–∏—è –∏ –∏—Ç–æ–≥–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ (–Ω–µ–¥–µ–ª—è, –º–µ—Å—è—Ü, –≥–æ–¥);

–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π;

—Å–∞—Ä–∫–∞—Å—Ç–∏—á–Ω—ã–µ –ø–æ–¥–±–∞–¥—Ä–∏–≤–∞–Ω–∏—è;

–ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL, async).

üîç –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
pip install -r requirements.txt
export BOT_TOKEN=<—Ç–≤–æ–π_—Ç–æ–∫–µ–Ω>
python bot.py


–∏–ª–∏ —á–µ—Ä–µ–∑ uvicorn-—Å–µ—Ä–≤–µ—Ä:

uvicorn server:app --reload

üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

PostgreSQL —Å async-–¥—Ä–∞–π–≤–µ—Ä–æ–º asyncpg.

–ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (init_db).

–ü–µ—Ä–≤–∏—á–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ (–≥—Ä—É–ø–ø—ã + —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è) —á–µ—Ä–µ–∑ ensure_seed_data().

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏—é –±–µ–∑ Alembic ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–æ–º.

üß∞ –ö–æ–º–∞–Ω–¥—ã
–ö–æ–º–∞–Ω–¥–∞	–û–ø–∏—Å–∞–Ω–∏–µ
/start	–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞, –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
/help	–°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
/my_profile	–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
/train	–ù–∞—á–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É
üìà –í –ø–ª–∞–Ω–∞—Ö

–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö;

—Ç–∞–π–º–µ—Ä—ã –æ—Ç–¥—ã—Ö–∞;

—à–∞–±–ª–æ–Ω—ã –ø—Ä–æ–≥—Ä–∞–º–º;

–æ—Ç—á—ë—Ç—ã —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏;

—Ä–µ–∂–∏–º —Ç—Ä–µ–Ω–µ—Ä–∞ —Å –ø–æ–¥–æ–ø–µ—á–Ω—ã–º–∏.
